{"filter":false,"title":"users.server.controller.js","tooltip":"/controllers/users.server.controller.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":40,"column":24},"end":{"row":40,"column":25},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":25},"end":{"row":40,"column":26},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":26},"end":{"row":40,"column":27},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":27},"end":{"row":40,"column":28},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":28},"end":{"row":40,"column":29},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":29},"end":{"row":40,"column":30},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":30},"end":{"row":40,"column":31},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":30},"end":{"row":40,"column":31},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":29},"end":{"row":40,"column":30},"action":"remove","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":29},"end":{"row":40,"column":30},"action":"insert","lines":["F"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":29},"end":{"row":40,"column":30},"action":"remove","lines":["F"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":29},"end":{"row":40,"column":30},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":30},"end":{"row":40,"column":31},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":31},"end":{"row":40,"column":32},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":32},"end":{"row":40,"column":33},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":34},"end":{"row":40,"column":35},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":35},"end":{"row":41,"column":0},"action":"insert","lines":["",""]},{"start":{"row":41,"column":0},"end":{"row":41,"column":12},"action":"insert","lines":["            "]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":12},"end":{"row":41,"column":13},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":13},"end":{"row":41,"column":14},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":14},"end":{"row":41,"column":15},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":15},"end":{"row":41,"column":16},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":16},"end":{"row":41,"column":17},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":17},"end":{"row":41,"column":18},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":18},"end":{"row":41,"column":19},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":19},"end":{"row":41,"column":20},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":19},"end":{"row":30,"column":20},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":21},"end":{"row":41,"column":22},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":22},"end":{"row":41,"column":23},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":23},"end":{"row":41,"column":24},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":24},"end":{"row":41,"column":25},"action":"insert","lines":["q"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":25},"end":{"row":41,"column":26},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":26},"end":{"row":41,"column":27},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":27},"end":{"row":41,"column":28},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":28},"end":{"row":41,"column":29},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":29},"end":{"row":41,"column":30},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":30},"end":{"row":41,"column":31},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":31},"end":{"row":41,"column":33},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":32},"end":{"row":41,"column":34},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":33},"end":{"row":41,"column":34},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":34},"end":{"row":41,"column":35},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":36},"end":{"row":41,"column":37},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":37},"end":{"row":41,"column":38},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":10},"end":{"row":42,"column":11},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":5},"end":{"row":43,"column":6},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":6},"end":{"row":43,"column":7},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":7},"end":{"row":43,"column":8},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":7},"end":{"row":43,"column":8},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":6},"end":{"row":43,"column":7},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":6},"end":{"row":43,"column":7},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":7},"end":{"row":43,"column":8},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":8},"end":{"row":43,"column":9},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":9},"end":{"row":43,"column":10},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":10},"end":{"row":43,"column":11},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":11},"end":{"row":43,"column":12},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":12},"end":{"row":45,"column":5},"action":"insert","lines":["","        ","    }"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":8},"end":{"row":44,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":9},"end":{"row":44,"column":10},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":10},"end":{"row":44,"column":11},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":11},"end":{"row":44,"column":12},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":12},"end":{"row":44,"column":13},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":13},"end":{"row":44,"column":14},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":14},"end":{"row":44,"column":15},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":15},"end":{"row":44,"column":16},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":16},"end":{"row":44,"column":17},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":17},"end":{"row":44,"column":18},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":18},"end":{"row":44,"column":19},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":19},"end":{"row":44,"column":20},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":20},"end":{"row":44,"column":21},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":21},"end":{"row":44,"column":22},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":22},"end":{"row":44,"column":23},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":23},"end":{"row":44,"column":24},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":24},"end":{"row":44,"column":25},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":25},"end":{"row":44,"column":26},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":26},"end":{"row":44,"column":27},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":27},"end":{"row":44,"column":29},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":28},"end":{"row":44,"column":30},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":29},"end":{"row":44,"column":30},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":32},"end":{"row":44,"column":33},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":46,"column":1},"end":{"row":46,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":1},"end":{"row":35,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":1},"end":{"row":24,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":46,"column":2},"end":{"row":47,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":47,"column":0},"end":{"row":48,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":0},"end":{"row":138,"column":0},"action":"insert","lines":["exports.register = function(req, res, next) {","    if (!req.user) {","        var user = new User(req.body);","        var message = null;","        user.provider = 'local';","        user.save(function(err) {","            if (err) {","                var message = getErrorMessage(err);","                req.flash('error', message);","                return res.redirect('/register');","            }","            ","            req.login(user, function(err) {","                if (err) {","                    return next(err);","                }","                ","                return res.redirect('/');","            })","        })","    } else {","        return res.redirect('/');","    }","}","","exports.logout = function(req, res) {","    req.logout();","    res.redirect('/');","}","","exports.create = function(req, res, next) {","    var user = new User(req.body);","    user.save(function(err) {","       if (err) {","           return next(err)","       } else {","           res.json(user);","       }","    });","}","","exports.list = function(req, res, next) {","    User.find({}, function(err, users) {","        if (err) {","            return next(err);","        } else {","            res.json(users);","        }","    });","}","","exports.read = function(req, res) {","    res.json(req.user);","}","","exports.userByID = function(req, res, next, id) {","    User.findOne({","        _id: id","    }, function(err, user) {","        if (err) {","            return next(err)","        } else {","            req.user = user;","            if (user == null) {","                return res.json({'message':'user not found'});","            }","            next();","        }","    })","}","","exports.update = function(req, res, next) {","    User.findByIdAndUpdate(req.user.id, req.body, function(err, user) {","        if (err) {","            return next(err);","        } else {","            res.json(user);","        }","    })","}","","exports.delete = function(req, res, next) {","    req.user.remove(function (err) {","        if (err) {","            return next(err);","        } else {","            res.json({'message':'user deleted'});","        }","    })","}",""]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":1},"end":{"row":71,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":76,"column":1},"end":{"row":76,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":1},"end":{"row":87,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":82,"column":27},"end":{"row":82,"column":28},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":97,"column":1},"end":{"row":97,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":101,"column":1},"end":{"row":101,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":108,"column":28},"end":{"row":108,"column":29},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":6},"end":{"row":116,"column":7},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":117,"column":1},"end":{"row":117,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":126,"column":6},"end":{"row":126,"column":7},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":127,"column":1},"end":{"row":127,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":136,"column":6},"end":{"row":136,"column":8},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":136,"column":6},"end":{"row":136,"column":8},"action":"remove","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":136,"column":6},"end":{"row":136,"column":7},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":137,"column":1},"end":{"row":137,"column":2},"action":"insert","lines":[";"]}]}]]},"ace":{"folds":[],"scrolltop":96.59999999999972,"scrollleft":0,"selection":{"start":{"row":21,"column":5},"end":{"row":21,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1424536982000,"hash":"eda9d1a90f8b0ee4718149c17911108a7b9ce274"}